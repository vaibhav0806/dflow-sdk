---
title: DFlowClient
description: The main client class for interacting with DFlow APIs
---

# DFlowClient

The `DFlowClient` is the main entry point for interacting with the DFlow API. It provides access to all API modules and manages HTTP connections.

## Import

```python
from dflow import DFlowClient
```

## Constructor

```python
client = DFlowClient(
    environment: Literal["development", "production"] = "development",
    api_key: str | None = None,
    metadata_base_url: str | None = None,
    trade_base_url: str | None = None,
    ws_url: str | None = None,
)
```

### Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `environment` | `"development" \| "production"` | `"development"` | Environment to use. Development requires no API key. |
| `api_key` | `str \| None` | `None` | API key for authenticated endpoints (required for production) |
| `metadata_base_url` | `str \| None` | `None` | Custom metadata API URL (overrides environment) |
| `trade_base_url` | `str \| None` | `None` | Custom trade API URL (overrides environment) |
| `ws_url` | `str \| None` | `None` | Custom WebSocket URL (overrides environment) |

## Environment Options

| Environment | API Key | Endpoints | Use Case |
|-------------|---------|-----------|----------|
| `"development"` | Not required | `dev-*.dflow.net` | Testing with real capital against Kalshi |
| `"production"` | Required | `*.dflow.net` | Production deployments |

## API Modules

The client provides access to the following API modules:

| Property | Type | Description |
|----------|------|-------------|
| `markets` | `MarketsAPI` | Market data and discovery |
| `events` | `EventsAPI` | Event information |
| `orderbook` | `OrderbookAPI` | Orderbook data |
| `trades` | `TradesAPI` | Trade history |
| `live_data` | `LiveDataAPI` | Live market data |
| `series` | `SeriesAPI` | Series information |
| `tags` | `TagsAPI` | Tag management |
| `sports` | `SportsAPI` | Sports-specific data |
| `search` | `SearchAPI` | Search functionality |
| `orders` | `OrdersAPI` | Order management |
| `swap` | `SwapAPI` | Token swaps |
| `intent` | `IntentAPI` | Intent-based trading |
| `prediction_market` | `PredictionMarketAPI` | Prediction market operations |
| `tokens` | `TokensAPI` | Token information |
| `venues` | `VenuesAPI` | Venue data |
| `ws` | `DFlowWebSocket` | WebSocket client |

## Examples

### Basic Usage (Development)

```python
from dflow import DFlowClient

# Development environment (default) - no API key required
# Uses dev-*.dflow.net endpoints for testing with real capital
client = DFlowClient()

# Access markets
response = client.markets.get_markets(status="active")
for market in response.markets:
    print(f"{market.ticker}: YES={market.yes_ask}")
```

### Production Environment

```python
from dflow import DFlowClient

# Production requires an API key
client = DFlowClient(environment="production", api_key="your-api-key")
```

### With API Key

```python
# Set API key at initialization
client = DFlowClient(api_key="your-api-key")

# Or set it later
client = DFlowClient()
client.set_api_key("your-api-key")
```

### Custom URLs

```python
client = DFlowClient(
    metadata_base_url="https://custom-metadata.example.com",
    trade_base_url="https://custom-trade.example.com",
    ws_url="wss://custom-ws.example.com"
)
```

### Context Manager

```python
with DFlowClient() as client:
    response = client.markets.get_markets()
    # HTTP client is automatically closed when exiting the context
```

## Methods

### set_api_key

Set or update the API key for authenticated requests.

```python
client.set_api_key(api_key: str) -> None
```

### close

Close the HTTP client connections.

```python
client.close() -> None
```
