---
title: Trades API
description: Query historical trade data for prediction markets
---

# Trades API

The Trades API provides access to historical trade data for prediction markets. Relays requests directly to Kalshi API.

## Access

```typescript
const dflow = new DFlowClient();
const trades = dflow.trades;
```

## Methods

### getTrades

Get historical trades with optional filters.

```typescript
const { trades, cursor } = await dflow.trades.getTrades({
  ticker: 'BTCD-25DEC0313-T92749.99',
  limit: 100,
});

for (const trade of trades) {
  console.log(`${trade.side} @ ${trade.price} - ${trade.count} shares`);
}
```

**Parameters:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `ticker` | `string` | No | Filter by market ticker |
| `minTs` | `number` | No | Filter trades after this Unix timestamp |
| `maxTs` | `number` | No | Filter trades before this Unix timestamp |
| `limit` | `number` | No | Maximum trades to return (1-1000, default 100) |
| `cursor` | `string` | No | Pagination cursor (trade ID) to start from |

---

### getTradesByMint

Get trades by outcome token mint address.

```typescript
const { trades } = await dflow.trades.getTradesByMint('EPjFWdd5...', {
  limit: 50,
});

// Filter by timestamp
const recentTrades = await dflow.trades.getTradesByMint('EPjFWdd5...', {
  minTs: Date.now() / 1000 - 86400,  // Last 24 hours
});
```

**Parameters:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `mintAddress` | `string` | Yes | Mint address (ledger or outcome mint) |
| `params.minTs` | `number` | No | Filter trades after this Unix timestamp |
| `params.maxTs` | `number` | No | Filter trades before this Unix timestamp |
| `params.limit` | `number` | No | Maximum trades to return (1-1000, default 100) |
| `params.cursor` | `string` | No | Pagination cursor (trade ID) to start from |

---

## Trade Object

```typescript
interface Trade {
  tradeId: string;
  ticker: string;
  side: string;
  yesPrice: number;
  noPrice: number;
  count: number;
  takerSide: string;
  createdTime: string;
}

interface TradesResponse {
  trades: Trade[];
  cursor?: string;
}
```

## Examples

### Get Recent Trades

```typescript
const { trades } = await dflow.trades.getTrades({
  ticker: 'BTCD-25DEC0313-T92749.99',
  limit: 20,
});

console.log('Recent Trades:');
for (const trade of trades) {
  const time = new Date(trade.createdTime).toLocaleTimeString();
  console.log(`[${time}] ${trade.takerSide.toUpperCase()} ${trade.count} @ YES=$${trade.yesPrice}`);
}
```

### Filter by Timestamp Range

```typescript
// Get trades from a specific time range
const { trades } = await dflow.trades.getTrades({
  ticker: 'BTCD-25DEC0313-T92749.99',
  minTs: 1704067200,  // Jan 1, 2024
  maxTs: 1704153600,  // Jan 2, 2024
});

console.log(`Found ${trades.length} trades in range`);
```

### Paginate Through All Trades

```typescript
async function getAllTrades(ticker: string): Promise<Trade[]> {
  const allTrades: Trade[] = [];
  let cursor: string | undefined;

  do {
    const response = await dflow.trades.getTrades({
      ticker,
      limit: 100,
      cursor,
    });
    
    allTrades.push(...response.trades);
    cursor = response.cursor;
  } while (cursor);

  return allTrades;
}

const trades = await getAllTrades('BTCD-25DEC0313-T92749.99');
console.log(`Total trades: ${trades.length}`);
```

## Real-time Trades

For real-time trade updates, use the WebSocket API:

```typescript
await dflow.ws.connect();

dflow.ws.subscribeTrades(['BTCD-25DEC0313-T92749.99']);

dflow.ws.onTrade((trade) => {
  console.log(`New trade: ${trade.side} @ ${trade.price}`);
});
```

See the [WebSocket API](/docs/api-reference/websocket) for more details.
